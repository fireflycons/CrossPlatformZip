# See http://www.appveyor.com/docs/appveyor-yml for many more options

#Publish to Nuget Gallery with this key
environment:
  NUGET_API_KEY:
    secure: Y6RtiPHso3IP4m2v+l+33xkxpiAsE7ZdmZZZzBf99ScIPEECURKw0nwxZGUhaj1L

# Skip on updates to the readme.
# We can force this by adding [skip ci] or [ci skip] anywhere in commit message
skip_commits:
  message: /NO_CI.*|updated readme.*|update readme.*s/

image:
#  - Ubuntu
  - Visual Studio 2017

init:
  - ps:  Get-ChildItem -Path env:APPVEYOR*

before_build:
  - dotnet restore

matrix:
  fast_finish: true     # set this flag to immediately finish build once one of the jobs fails.

for:
-
  matrix:
    only:
      - image: Visual Studio 2017
  after_test:
    - ps: ./build/publish.ps1


configuration: Release

build:
  parallel: true                  # enable MSBuild parallel builds
  project: CrossPlatformZip.sln      # path to Visual Studio solution or project

test:
  # only assemblies to test
  assemblies:
    only:
      - '**\*.Tests.Unit.dll'

after_test:
  - ps: ./build/publish.ps1
